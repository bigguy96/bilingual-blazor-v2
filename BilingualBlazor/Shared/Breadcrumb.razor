@using Models
@inject IJSRuntime JSRuntime
@inject IStringLocalizer<Common> Localizer
@using System.Text.Json

@using Microsoft.AspNetCore.Html;

@inject State.ApplicationState AppState

@code{
    [Parameter]
    public string Value { get; set; }

    protected override void OnAfterRender(bool firstRender)
    {
        var appTop = new AppTop
        {
            appName = new List<AppName> { new AppName { text = Localizer["Title"] } },
            lngLinks = new List<Lnglink> { new Lnglink { href = "/test" } },
            breadcrumbs = new List<Models.Breadcrumb> { new Models.Breadcrumb { href = "/test", title = "Test" } }
        };

        var b = new Models.Breadcrumb { href = "/test", title=Value };

        var serializeOptions = new JsonSerializerOptions
        {
            PropertyNamingPolicy = JsonNamingPolicy.CamelCase,
            WriteIndented = true,
            IgnoreNullValues = true,
            PropertyNameCaseInsensitive = true,
        };

        var jsonString = JsonSerializer.Serialize(appTop, serializeOptions);

        var html = new HtmlString(jsonString);

        AppState.SetTop(html);
    }
}